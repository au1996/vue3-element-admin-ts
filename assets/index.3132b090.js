import{z as e,a0 as t,a6 as s,f as a,h as l,H as n,I as i,i as r,O as o,M as c,B as d,F as u,Z as h,S as m,e as f,o as p,u as g,P as v,J as b,K as w,T as k,an as x,ao as T,N as S,ag as _,am as C,A as E,R as y,D as $,L as F,aq as L,ap as V,a as A,b as z,y as B,q as P}from"./vue.ba1d3062.js";import{g as I,c as M,s as q,_ as W}from"./index.526568ed.js";import{i as O}from"./logo.513ae8ff.js";import{E as R}from"./element-plus.0dc63aca.js";const D={key:0,class:"menu-wrapper"},H=e({props:{nav:{type:Object,required:!0},isNest:{type:Boolean,default:!1}},setup:e=>(t(e),(t,m)=>{const f=s("I"),p=s("el-menu-item"),g=s("SidebarItem",!0),v=s("el-sub-menu");return e.nav.meta&&!e.nav.hide?(a(),l("div",D,[e.nav.children&&e.nav.children.length?(a(),n(v,{key:1,index:e.nav.path},{title:i((()=>[e.nav.meta.icon?(a(),n(f,{key:0,name:e.nav.meta.icon,size:"18",class:"sidebar-icon"},null,8,["name"])):c("",!0),r("span",null,o(e.nav.meta.title),1)])),default:i((()=>[(a(!0),l(u,null,h(e.nav.children,(e=>(a(),l("div",{key:e.path},[e.children&&e.children.length?(a(),n(g,{key:e.path,index:e.path,"is-nest":!0,nav:e,class:"nest-menu"},null,8,["index","nav"])):(a(),n(p,{key:1,index:e.path},{title:i((()=>[r("span",null,o(e.meta.title),1)])),_:2},1032,["index"]))])))),128))])),_:1},8,["index"])):(a(),n(p,{key:0,index:e.nav.path,class:d({"sub-menu-title-noDropdown":!e.nav.isNest})},{title:i((()=>[r("span",null,o(e.nav.meta.title),1)])),default:i((()=>[e.nav.meta.icon?(a(),n(f,{key:0,name:e.nav.meta.icon,size:"18",class:"sidebar-icon"},null,8,["name"])):c("",!0)])),_:1},8,["index","class"]))])):c("",!0)})}),j={class:"sidebar-container"},N=["src"],U={class:"logo-text"},Y=W(e({setup(e){const t=I(),o=m([]),c=f((()=>q.state.app.sidebar.opened)),d=f((()=>!c.value));p((()=>{x()}));const x=()=>{M.forEach((e=>{if("/"===e.path){const t=e.children;o.push(...t)}}));for(let e=0;e<o.length;e++)o[e].meta&&o[e].meta.roles&&!o[e].meta.roles.includes(t)&&(o.splice(e,1),e--);T(o)},T=e=>{const s=[];e.forEach((e=>{(e.meta&&!e.meta.roles||e.meta&&e.meta.roles&&e.meta.roles.includes(t))&&(s.push(e),e.children&&T(e.children))})),e.length=0,e.push(...s)};return(e,t)=>{const m=s("el-menu"),f=s("el-scrollbar");return a(),l("div",j,[r("div",{class:"logo",onClick:t[0]||(t[0]=t=>e.$router.push("/"))},[r("img",{class:"logo-img",src:g(O),alt:"logo"},null,8,N),v(k,{name:"fade-transform",mode:"out-in"},{default:i((()=>[b(r("h1",U,"Vue Element Admin",512),[[w,g(c)]])])),_:1})]),v(f,{"wrap-class":"scrollbar-wrapper"},{default:i((()=>[v(m,{router:!0,class:"v-enter-to","default-active":e.$route.path,collapse:g(d),"show-timeout":200,"text-color":"#fff","background-color":"#4a5a74","active-text-color":"#409EFF"},{default:i((()=>[(a(!0),l(u,null,h(g(o),(e=>(a(),n(H,{key:e.path,index:e.path,nav:e},null,8,["index","nav"])))),128))])),_:1},8,["default-active","collapse"])])),_:1})])}}}),[["__scopeId","data-v-85d2fc0b"]]),J=e({name:"Hamburger",props:{isActive:{type:Boolean,default:!1}},emits:{toggleClick:null}}),K=[(e=>(x("data-v-2b852698"),e=e(),T(),e))((()=>r("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"},null,-1)))];const X=W(J,[["render",function(e,t,s,n,i,r){return a(),l("div",{style:{padding:"0 15px"},onClick:t[0]||(t[0]=t=>e.$emit("toggleClick"))},[(a(),l("svg",{class:d([{"is-active":e.isActive},"hamburger"]),viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},K,2))])}],["__scopeId","data-v-2b852698"]]),Z=e({data:()=>({levelList:[]}),watch:{$route(){this.getBreadcrumb()}},created(){this.getBreadcrumb()},methods:{getBreadcrumb(){let e=this.$route.matched.filter((e=>e.meta&&e.meta.title));const t=e[0];if(!this.isDashboard(t)){e=[{path:"/home",meta:{title:"首页"}}].concat(e)}this.levelList=e.filter((e=>e.meta&&e.meta.title&&!1!==e.meta.breadcrumb))},isDashboard(e){const t=e&&e.name;return!!t&&t.trim().toLocaleLowerCase()==="Home".toLocaleLowerCase()}}}),G={key:0,class:"no-redirect"};const Q=W(Z,[["render",function(e,t,r,c,d,m){const f=s("router-link"),p=s("el-breadcrumb-item"),g=s("el-breadcrumb");return a(),n(g,{separator:"/",class:"app-breadcrumb"},{default:i((()=>[v(_,{name:"breadcrumb"},{default:i((()=>[(a(!0),l(u,null,h(e.levelList,((t,s)=>(a(),n(p,{key:t.path},{default:i((()=>["noRedirect"===t.redirect||s==e.levelList.length-1?(a(),l("span",G,o(t.meta.title),1)):(a(),n(f,{key:1,to:t.redirect||t.path},{default:i((()=>[S(o(t.meta.title),1)])),_:2},1032,["to"]))])),_:2},1024)))),128))])),_:1})])),_:1})}],["__scopeId","data-v-af87d0e9"]]);var ee,te,se,ae,le,ne,ie={exports:{}};
/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/ee=ie,te="undefined"!=typeof window&&void 0!==window.document?window.document:{},se=ee.exports,ae=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=0,a=t.length,l={};s<a;s++)if((e=t[s])&&e[1]in te){for(s=0;s<e.length;s++)l[t[0][s]]=e[s];return l}return!1}(),le={change:ae.fullscreenchange,error:ae.fullscreenerror},ne={request:function(e,t){return new Promise(function(s,a){var l=function(){this.off("change",l),s()}.bind(this);this.on("change",l);var n=(e=e||te.documentElement)[ae.requestFullscreen](t);n instanceof Promise&&n.then(l).catch(a)}.bind(this))},exit:function(){return new Promise(function(e,t){if(this.isFullscreen){var s=function(){this.off("change",s),e()}.bind(this);this.on("change",s);var a=te[ae.exitFullscreen]();a instanceof Promise&&a.then(s).catch(t)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){var s=le[e];s&&te.addEventListener(s,t,!1)},off:function(e,t){var s=le[e];s&&te.removeEventListener(s,t,!1)},raw:ae},ae?(Object.defineProperties(ne,{isFullscreen:{get:function(){return Boolean(te[ae.fullscreenElement])}},element:{enumerable:!0,get:function(){return te[ae.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(te[ae.fullscreenEnabled])}}}),se?ee.exports=ne:window.screenfull=ne):se?ee.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};const re=ie.exports;const oe=W(e({name:"Screenfull",data:()=>({isFullscreen:!1}),mounted(){this.init()},beforeUnmount(){this.destroy()},methods:{click:()=>re.isEnabled?(re.toggle(),!1):(R({message:"you browser can not work",type:"warning"}),!1),change(){this.isFullscreen=re.isFullscreen},init(){re.isEnabled&&re.on("change",this.change)},destroy(){re.isEnabled&&re.off("change",this.change)}}}),[["render",function(e,t,n,i,r,o){const c=s("I");return a(),l("div",{class:"screenfull-box",onClick:t[0]||(t[0]=(...t)=>e.click&&e.click(...t))},[v(c,{name:"FullScreen",size:"18"})])}],["__scopeId","data-v-aecf924b"]]),ce={class:"navbar",mode:"horizontal"},de={class:"right-menu"},ue={class:"avatar-wrapper"},he=["src"],me=(e=>(x("data-v-b2f12427"),e=e(),T(),e))((()=>r("i",{class:"el-icon-caret-bottom"},null,-1))),fe=S("首页"),pe=S("修改密码"),ge=S("登出"),ve=W(e({setup(e){const t=C(),n=f((()=>q.state.app.sidebar.opened)),o=f((()=>q.state.user.avatar)),c=()=>{q.dispatch("app/toggleSideBar")},d=()=>{R.warning("请联系管理员")},u=()=>{q.dispatch("user/logout").then((()=>{t.push("/login")}))};return(e,t)=>{const h=s("el-tooltip"),m=s("el-dropdown-item"),f=s("el-dropdown-menu"),p=s("el-dropdown");return a(),l("div",ce,[v(X,{class:"hamburger-container","is-active":g(n),onToggleClick:c},null,8,["is-active"]),v(Q,{class:"breadcrumb-container"}),r("div",de,[v(h,{effect:"dark",content:"全屏",placement:"bottom"},{default:i((()=>[v(oe,{class:"screenfull"})])),_:1}),v(p,{class:"avatar-container right-menu-item"},{dropdown:i((()=>[v(f,null,{default:i((()=>[v(m,{onClick:t[0]||(t[0]=t=>e.$router.push("/"))},{default:i((()=>[fe])),_:1}),v(m,{divided:"",onClick:d},{default:i((()=>[pe])),_:1}),v(m,{divided:"",onClick:u},{default:i((()=>[ge])),_:1})])),_:1})])),default:i((()=>[r("div",ue,[r("img",{src:g(o)?g(o):"/img/logo.png",class:"user-avatar"},null,8,he),me])])),_:1})])])}}}),[["__scopeId","data-v-b2f12427"]]),be=e({name:"ScrollPane",emits:{scroll:null},data:()=>({left:0,tagAndTagSpacing:4}),computed:{scrollWrapper(){return this.$refs.scrollContainer.$refs.wrap$}},mounted(){this.scrollWrapper.addEventListener("scroll",this.emitScroll,!0)},beforeUnmount(){this.scrollWrapper.removeEventListener("scroll",this.emitScroll)},methods:{handleScroll(e){const t=e.wheelDelta||40*-e.deltaY,s=this.scrollWrapper;s.scrollLeft=s.scrollLeft+t/4},emitScroll(){this.$emit("scroll")},moveToTarget(e){const t=this.$refs.scrollContainer.$el.offsetWidth,s=this.scrollWrapper,a=document.getElementsByClassName("tags-view-item");let l=null,n=null;if(a.length>0&&(l=a[0],n=a[a.length-1]),l===e)s.scrollLeft=0;else if(n===e)s.scrollLeft=s.scrollWidth-t;else{const l=[...a].findIndex((t=>t===e)),n=a[l-1],i=a[l+1],r=i.offsetLeft+i.offsetWidth+this.tagAndTagSpacing,o=n.offsetLeft-this.tagAndTagSpacing;r>s.scrollLeft+t?s.scrollLeft=r-t:o<s.scrollLeft&&(s.scrollLeft=o)}}}});const we={},ke=e({components:{ScrollPane:W(be,[["render",function(e,t,l,r,o,c){const d=s("el-scrollbar");return a(),n(d,{ref:"scrollContainer",vertical:!1,class:"scroll-container",onWheel:y(e.handleScroll,["prevent"])},{default:i((()=>[E(e.$slots,"default",{},void 0,!0)])),_:3},8,["onWheel"])}],["__scopeId","data-v-e85cda80"]])},data:()=>({visible:!1,top:0,left:0,selectedTag:{},affixTags:[]}),computed:{visitedViews(){return this.$store.state.tagsView.visitedViews},routes(){return this.$store.state.permission.routes}},watch:{$route(e){this.addTags(),this.moveToCurrentTag(e)},visible(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted(){this.initTags(),this.addTags()},methods:{isActive(e){return e.path===this.$route.path},isAffix:e=>e.meta&&e.meta.affix,filterAffixTags(e,t="/"){let s=[];return e.forEach((e=>{if(e.meta&&e.meta.affix){const a=we.resolve(t,e.path);s.push({fullPath:a,path:a,name:e.name,meta:{...e.meta}})}if(e.children){const t=this.filterAffixTags(e.children,e.path);t.length>=1&&(s=[...s,...t])}})),s},initTags(){const e=this.affixTags=this.filterAffixTags(this.routes);for(const t of e)t.name&&this.$store.dispatch("tagsView/addVisitedView",t)},addTags(){const{name:e}=this.$route;return e&&this.$store.dispatch("tagsView/addView",this.$route),!1},moveToCurrentTag(e){this.$nextTick((()=>{const t=this.visitedViews,s=document.getElementsByClassName("tags-view-item");for(let a=0,l=t.length;a<l;a++)if(t[a].path===e.path){this.$refs.scrollPane.moveToTarget(s[a]),t[a].fullPath!==this.$route.fullPath&&this.$store.dispatch("tagsView/updateVisitedView",this.$route);break}}))},closeSelectedTag(e){this.$store.dispatch("tagsView/delView",e).then((({visitedViews:t})=>{this.isActive(e)&&this.toLastView(t)}))},closeOthersTags(){this.$router.push(this.selectedTag),this.$store.dispatch("tagsView/delOthersViews",this.selectedTag).then((()=>{this.moveToCurrentTag(this.selectedTag)}))},closeAllTags(e){this.$store.dispatch("tagsView/delAllViews").then((({visitedViews:t})=>{this.affixTags.some((t=>t.path===e.path))||this.toLastView(t)}))},toLastView(e){const t=e.slice(-1)[0];t?this.$router.push(t.fullPath):this.$router.push("/")},openMenu(e,t){const s=this.$el.getBoundingClientRect().left,a=this.$el.offsetWidth-105,l=t.clientX-s+15;this.left=l>a?a:l,this.top=t.clientY,this.visible=!0,this.selectedTag=e},closeMenu(){this.visible=!1},handleScroll(){this.closeMenu()}}}),xe={id:"tags-view-container"};const Te=W(ke,[["render",function(e,t,m,f,p,g){const k=s("I"),x=s("router-link"),T=s("ScrollPane");return a(),l("div",xe,[v(T,{ref:"scrollPane",class:"tags-view-wrapper",onScroll:e.handleScroll},{default:i((()=>[(a(!0),l(u,null,h(e.visitedViews,(t=>(a(),n(x,{key:t.path,to:{path:t.path,query:t.query,fullPath:t.fullPath},class:d([e.isActive(t)?"active":"","tags-view-item"]),onMouseup:y((s=>e.isAffix(t)?"":e.closeSelectedTag(t)),["middle"]),onContextmenu:y((s=>e.openMenu(t,s)),["prevent"])},{default:i((()=>[S(o(t.title)+" ",1),e.isAffix(t)?c("",!0):(a(),n(k,{key:0,name:"Close",size:10,onClick:y((s=>e.closeSelectedTag(t)),["prevent","stop"])},null,8,["onClick"]))])),_:2},1032,["to","class","onMouseup","onContextmenu"])))),128))])),_:1},8,["onScroll"]),b(r("ul",{style:$({left:e.left+"px",top:e.top+"px"}),class:"contextmenu"},[e.isAffix(e.selectedTag)?c("",!0):(a(),l("li",{key:0,onClick:t[0]||(t[0]=t=>e.closeSelectedTag(e.selectedTag))},"Close")),r("li",{onClick:t[1]||(t[1]=(...t)=>e.closeOthersTags&&e.closeOthersTags(...t))},"Close Others"),r("li",{onClick:t[2]||(t[2]=t=>e.closeAllTags(e.selectedTag))},"Close All")],4),[[w,e.visible]])])}],["__scopeId","data-v-ddf48549"]]),Se=e({name:"AppMain"}),_e={class:"app-main"};const Ce=W(Se,[["render",function(e,t,r,o,c,d){const u=s("router-view");return a(),l("section",_e,[v(u,null,{default:i((({Component:e})=>[v(k,{name:"fade-transform",mode:"out-in"},{default:i((()=>[(a(),n(L,null,[(a(),n(F(e)))],1024))])),_:2},1024)])),_:1})])}],["__scopeId","data-v-38010e9f"]]),Ee={class:"main-container"},ye=W(e({setup(e){const t=V(),s=A(992),n=f((()=>q.state.app.sidebar.opened)),i=f((()=>q.state.app.sidebar.withoutAnimation)),o=f((()=>q.state.app.device)),u=f((()=>({hideSidebar:!n.value,openSidebar:n.value,withoutAnimation:i.value,mobile:"mobile"===o.value})));z(t,(()=>{"mobile"===o.value&&n.value&&q.dispatch("app/closeSideBar",!1)})),B((()=>{window.addEventListener("resize",b)})),p((()=>{m()&&(q.dispatch("app/toggleDevice","mobile"),q.dispatch("app/closeSideBar",!0))})),P((()=>{window.removeEventListener("resize",b)}));const h=()=>{q.dispatch("app/closeSideBar",!1)},m=()=>document.body.getBoundingClientRect().width-1<s.value,b=()=>{if(!document.hidden){const e=m();q.dispatch("app/toggleDevice",e?"mobile":"desktop"),e&&q.dispatch("app/closeSideBar",!0)}};return(e,t)=>(a(),l("div",{class:d(["app-wrapper",g(u)])},["mobile"===g(o)&&g(n)?(a(),l("div",{key:0,class:"drawer-bg",onClick:h})):c("",!0),v(Y),r("div",Ee,[v(ve),v(Te),v(Ce)])],2))}}),[["__scopeId","data-v-e67ef336"]]);export{ye as default};
